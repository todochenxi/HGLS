论文：
    47.00 35.06 70.41 
本地测试
- sequence = rnn, seq_len = 3
    46.63 34.82 52.65 69.37
    47.31 35.19 53.63 71.28
    - seq_len = 10

- sequence = regcn
    

biregcn
- sequence = rnn, seq_len = 3
    epoch 13:
    47.58 35.40 54.24 71.33
- sequence = regcn
    epoch = 10
    48.36 35.99 54.96 72.31

添加static_emb
    epoch = 7
    49.60 36.78 56.70 74.33

增加历史长度
    seq_len = 10, epoch=8
    49.83 37.21 56.57  74.07
    49.75 36.95 56.94 73.98

位置编码

考虑将和s有关的事件按事件顺序，作为rootindex

采用warm up的调度策略

# 实验
## 测试 同样的sequence，以及seq_len biregcn 和 regcn的效果

## 固定sequence， 测试 不同seq_len, biregcn 和 regcn的效果, 验证biregcn可以获取更长的演化能力
- [x] ing, 固定 rnn，不使用 static
biregcn-rnn

1  0.4751 0.3540 0.5402 0.7091
2  0.4762 0.3539 0.5446 0.7090
3  0.4770 0.3561 0.5433 0.7123
4  0.4745 0.3531 0.5395 0.7150
5  0.4744 0.3516 0.5421 0.7104
6  0.4801 0.3565 0.5483 0.7203
7  0.4714 0.3497 0.5348 0.7078
8  0.4805 0.3559 0.5499 0.7207
9  0.4769 0.3528 0.5410 0.7223
10 0.4761 0.3523 0.5408 0.7192
11 0.4752 0.3536 0.5383 0.7134
12 0.4773 0.3530 0.5431 0.7212
13 0.4799 0.3573 0.5457 0.7189
14 0.4758 0.3523 0.5427 0.7182
15 0.4737 0.3514 0.5380 0.7121

regcn-rnn
1 0.4784 0.3584 0.5425 0.7101
2 0.4748 0.3561 0.5382 0.7082
3 0.4694 0.3509 0.5317 0.6978
4 0.4686 0.3471 0.5302 0.7042
5 0.4722 0.3500 0.5389 0.7078
6 0.4763 0.3557 0.5408 0.7120
7 0.4704 0.3467 0.5340 0.7131
8 0.4674 0.3437 0.5327 0.7138
9 0.4679 0.3443 0.5307 0.7108
10 0.4639 0.3392 0.5298 0.7095

biregcn-regcn

1 0.4783 0.3574 0.5419 0.7129
2 0.4753 0.3525 0.5397 0.7127
3 0.4785 0.3654 0.5427 0.7154
4 0.4785 0.3577 0.5436 0.7103
5 0.4803 0.3594 0.5454 0.7136
6 0.4786 0.3559 0.5463 0.7181
7 0.4768 0.3525 0.5461 0.7177
8 0.4797 0.3594 0.5445 0.7131
9 0.4757 0.3532 0.5444 0.7094
10 
regcn-regcn
1 0.4815 0.3580 0.5497 0.7202
2 0.4766 0.3564 0.5400 0.7118
3 0.4756 0.3553 0.5383 0.7098
4 0.4688 0.3470 0.5330 0.7015
5 0.4727 0.3518 0.5357 0.7096
6 0.4698 0.3502 0.5324 0.7040
7 0.4668 0.3461 0.5283 0.7019
8 0.4668 0.3440 0.5278 0.7161
9 0.4724 0.3510 0.5364 0.7111
10 0.4642 0.3413 0.5256 0.7114

- 结论：双向确实可以提升演化能力，但准确率没法提升
- 双向，谣言检测的双向是因为数据是符合的，这里并不是。。。
- 新的图谱是怎么构成的很重要，位置编码怎么加很重要
## 位置编码
1. local pe
    
    - ii. cat(node, pe) + cat(relation, pe)  0.4806 0.3580 0.5452 0.7156  | regcn_regcn_1 
    - iii. cat(node+relation, pe)
    - ii 和 iii.
    - i. node + relation + pe 暂不考虑
    - 只考虑 h
    - 怎么在hrgnn中加
    - pe 更新
    - pe + p_in
- i.  node = self.embedding_hp(torch.cat((node, p), dim=-1))
      relation = self.embedding_rp(torch.cat((relation, p), dim=-1))
regcn_regcn_seq_len_1_pos_rw_dim
3 0.4776 0.3550 0.5452 0.7167
6 0.4816 0.3605 0.5474 0.7139
9 0.4822(0.4811) 0.3590(0.3584) 0.5510(0.5483) 0.7190(0.7199)

- ii. msg = self.embedding_hrp((node+relation, p), dim=-1)
regcn_regcn_seq_len_1_pos_rw_dim

3 0.4785 0.3573 0.5459 0.7151
4 0.4798 0.3572 0.5466 0.7177
5 0.4837 0.3618 0.5487 0.7201
 6 0.4867 0.3645 0.5530 0.7224
7 0.4836 0.3616 0.5505 0.7182
8 0.4809 0.3591 0.5490 0.7160
9 0.4796 0.3590 0.5449 0.7152
10 0.4815 0.3614 0.5457 0.7131
11 0.4816 0.3631 0.5452 0.7123
12 0.4820 0.3616 0.5464 0.7146
13 0.4830 0.3606 0.5512 0.7171
14 0.4790 0.3568 0.5435 0.7169
15 0.4816 0.3597 0.5465 0.7175

biregcn_regcn_seq_len_5_pos_rw_dim
1 0.4797 0.3553 0.5486 0.7198
2 0.4747 0.3528 0.5412 0.7089
3 0.4731 0.3509 0.5466 0.7080
4 0.4746 0.3535 0.5406 0.7065
5 0.4748 0.3530 0.5419 0.7098
6 0.4812 0.3592 0.5462 0.7177
7 0.4765 0.3544 0.5414 0.7121
8 0.4758 0.3531 0.5417 0.7097k
9 0.4744 0.3502 0.5423 0.7137
10 0.4755 0.3551 0.5398 0.7160 
11 0.4788 0.3582 0.5461 0.7150
12 0.4806 0.3559 0.5507 0.7190
13 0.4768 0.3556 0.5421 0.7131
14 0.4793 0.3567 0.5482 0.7173
15 0.4771 0.3550 0.5436 0.7150
- i, ii.
regcn_regcn_seq_len_1_pos_rw_dim
3 0.4813 0.3570 0.5505 0.7206
4 0.4828 0.3607 0.5521 0.7188
5 0.4791 0.3543 0.5464 0.7203
6 0.4791 0.3579 0.5465 0.7149
7 0.4828 0.3604 0.5515 0.7171
 8 0.4856 0.3650 0.5543 0.7144
9 0.4802 0.3591 0.5466 0.7127
10 0.4781 0.3573 0.5444 0.7118
11 0.4811 0.3562 0.5508 0.7206
12 

## new_graph
relative pe local_pe dim=1
0.4884 0.3649 0.5605 0.7262
0.4865 0.3608 0.5549 0.7255

测试增加num_layers 
2. global pe

## root_index

## TODO
- [xx] 看论文了解数据处理的流程
- [ ] 双向如何加，rootindex 如何加
- [ ] hrgnn 如何加pe
- [ ] global_pe 如何加
- [ ] 写论文
# 论文


